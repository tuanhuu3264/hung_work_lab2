<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie App</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/vue-router@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <div class="container">
            <div class="container-header">
                <div id="header" class="header">
                    <p id="header-mssv">MSSV: 12345678</p>
                    <h3 id="header-title">Movies Info</h3>
                    <div class="header-change-mode">
                        <label class="toggle-switch">
                            <input type="checkbox" id="modeToggle"  v-model="darkMode" @change="toggleDarkMode">
                            <span class="slider"></span>
                        </label>
                        </label>
                    </div>
                </div>
                <div id="nav" class="container-nav">
                    <img src="icons/icons8-home.svg" alt="icon-home" id="icon-home" style="width: 24px;" />
                    <div class="search-tool">
                        <input id="search-text" type="text" placeholder="Search movies..." v-model="searchQuery" />
                        <button id="search-button" @click="searchMovies" class="btn-search">Search</button>
                    </div>
                </div>
            </div>

            <div class="container-body">
                <div id="movieCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item" v-for="(movie, index) in movies" :class="{ active: index === 0 }"
                            :key="movie.title">
                            <div class="d-flex justify-content-center">
                                <img :src="movie.image" class="d-block w-40" :alt="movie.title">
                                <div class="movie-info movie-overlay mt-3" >
                                    <h4>{{ movie.title }}</h4>
                                    <p>{{ movie.description }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#movieCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#movieCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                <h3 class="title-caursol">Most Popular</h3>
                <div id="movieMostPopularCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner top-rating-caursol-inner">
                        <div class="carousel-item top-rating-caursol-item" v-for="(chunk, chunkIndex) in chunkMovies(topRating)"
                            :class="{ active: chunkIndex === 0 }" :key="chunkIndex">
                            <div class="d-flex justify-content-around">
                                <div v-for="(movie, index) in chunk" :key="movie.title" class="top-rating-movie-item">
                                    <img :src="movie.image" class="d-block w-30" :alt="movie.title">
                                    <div class="mt-3 movie-info-popup">
                                        <h4>{{ movie.title }}</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#movieMostPopularCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#movieMostPopularCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
                <h3 class="title-caursol">Top Rating</h3>
                <div id="movieRatingCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner top-rating-caursol-inner">
                        <div class="carousel-item top-rating-caursol-item" v-for="(chunk, chunkIndex) in chunkMovies(topRating)"
                            :class="{ active: chunkIndex === 0 }" :key="chunkIndex">
                            <div class="d-flex justify-content-around">
                                <div v-for="(movie, index) in chunk" :key="movie.title" class="top-rating-movie-item">
                                    <img :src="movie.image" class="d-block w-30" :alt="movie.title">
                                    <div class=" mt-3 movie-info-popup" >
                                        <h4>{{ movie.title }}</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#movieRatingCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#movieRatingCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>


        const HomePage = {
            template: `
              <div>

                </div>
              </div>
            `
        };

        const SearchPage = {
            template: `
              <div>
                <h1>Search Results</h1>
                <ul>
                  <li v-for="(item, index) in filteredItems" :key="index">{{ item }}</li>
                </ul>
              </div>
            `,
            data() {
                return {
                    searchQuery: "",
                    items: ["Inception", "Interstellar", "Avengers", "The Dark Knight"]
                };
            },
            computed: {
                filteredItems() {
                    return this.items.filter(item =>
                        item.toLowerCase().includes(this.searchQuery.toLowerCase())
                    );
                }
            }
        };

        const DetailPage = {
            template: `
              <div>
                <h1>Detail Page</h1>
                <p>Movie ID: {{ $route.params.id }}</p>
              </div>
            `
        };

        const routes = [
            { path: "/", component: HomePage },
            { path: "/search", component: SearchPage },
            { path: "/detail/:id", component: DetailPage }
        ];

        const router = VueRouter.createRouter({
            history: VueRouter.createWebHashHistory(),
            routes
        });

        const app = Vue.createApp({
            data() {
                return {
                    darkMode: false,
                    movies: [
                        { image: "https://via.placeholder.com/300x450?text=Movie+1", title: "Children of Heaven", description: "Award-winning family drama." },
                        { image: "https://via.placeholder.com/300x450?text=Movie+2", title: "Interstellar", description: "A journey through space and time." },
                        { image: "https://via.placeholder.com/300x450?text=Movie+3", title: "The Dark Knight", description: "Batman battles Joker." }
                    ],
                    searchQuery: "",
                    topRating: [
                        { image: "https://via.placeholder.com/150", title: "Avengers" },
                        { image: "https://via.placeholder.com/150", title: "Titanic" },
                        { image: "https://via.placeholder.com/150", title: "Inception" },
                        { image: "https://via.placeholder.com/150", title: "The Godfather" },
                    ]
                };
            },
            methods: {
                 toggleDarkMode() {
                    if (this.darkMode) {
                        document.body.classList.remove('light-mode');
                        document.body.classList.add('dark-mode');
                        document.getElementById("header").classList.add("header-dark-mode"); 
                        document.getElementById("footer").classList.add("footer-dark-mode"); 
                        document.getElementById("nav").classList.add("nav-dark-mode");
                        document.getElementById("search-button").classList.add("btn-search-dark");
                        document.getElementById("search-text").classList.add("search-text-dark");
                        document.getElementById("icon-home").setAttribute("src", "icons/icons8-home-white.svg");

                    } else {
                        document.body.classList.remove('dark-mode');
                        document.body.classList.add('light-mode');
                        document.getElementById("header").classList.remove("header-dark-mode"); 
                        document.getElementById("nav").classList.remove("nav-dark-mode"); 
                        document.getElementById("footer").classList.remove("footer-dark-mode"); 
                        document.getElementById("search-button").classList.remove("btn-search-dark");
                        document.getElementById("search-text").classList.remove("search-text-dark");
                        document.getElementById("icon-home").classList.remove("icon-dark-mode");
                         document.getElementById("icon-home").setAttribute("src", "icons/icons8-home.svg");
                    }
                },
                searchMovies() {
                },
                chunkMovies(array) {
                    let size = 3; 
                    return Array.from({ length: Math.ceil(array.length / size) }, (_, index) =>
                        array.slice(index * size, index * size + size)
                    );
                }
            },
            router
        });

        app.use(router).mount("#app");
    </script>
   
</body>
<footer>
    <div id="footer" class="footer">
        <p>Thai Nguyen Viet Hung</p>
    </div>
</footer>

</html>